# Blok serwera HTTP (Port 80)
server {
    listen 80;
    # Definicja nazw serwera dla ruchu HTTP
    server_name ustenko.mywire.org www.ustenko.mywire.org;

    # Lokalizacja dla Certbot Challenge:
    # 1. Ten blok jest kluczowy do pierwszego uruchomienia/odnowienia certyfikatu.
    # 2. Umożliwia Certbotowi weryfikację własności domeny.
    location /.well-known/acme-challenge/ {
        # Wskazuje na webroot (tom wspólny), gdzie Certbot umieszcza pliki weryfikacyjne.
        root /var/www/html;
    }

    # Główna lokalizacja:
    # 1. Zwraca kod 404 dla całego pozostałego ruchu HTTP.
    # 2. Użycie tego bloku zapobiega serwowaniu niezabezpieczonej (HTTP) treści,
    #    dopóki certyfikaty SSL nie zostaną pomyślnie utworzone i zainstalowane.
    location / {
        return 404;
    }
}